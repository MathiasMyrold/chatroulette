(this.webpackJsonpklient=this.webpackJsonpklient||[]).push([[0],{131:function(n,e,t){"use strict";t.r(e);var r,c,o,i,a,s,u,l,d,b,h,j,g,x,p,f,m=t(0),O=t.n(m),v=t(9),w=t.n(v),k=(t(95),t(29)),C=t(44),S=(t(96),t(8)),y=t(13),D=t(14),R=t(164),E=t(165),I=t(4),L=D.a.div(r||(r=Object(y.a)(["\n  width: 30rem;\n  height: 28rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  padding: 3rem;\n  border-radius: 8px;\n"]))),A=function(n){return Object(I.jsxs)(L,{children:[Object(I.jsx)("h1",{children:"Login"}),Object(I.jsx)("hr",{}),Object(I.jsx)(R.a,{style:{width:"100%",marginBottom:24},label:"Username",onChange:n.onChange,variant:"outlined"}),Object(I.jsx)(E.a,{style:{width:"100%"},variant:"contained",color:"secondary",onClick:n.onLogin,children:"Enter chat room"})]})},T=D.a.div(c||(c=Object(y.a)(["\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),U=function(){var n=Object(m.useState)(""),e=Object(k.a)(n,2),t=e[0],r=e[1],c=Object(m.useContext)(en).setAuthState,o=Object(S.f)();return Object(I.jsx)(T,{children:Object(I.jsx)(A,{onLogin:function(){c({username:t}),o.push("/chat")},onChange:function(n){r(n.target.value)}})})},M=t(57),B=t(85),J=t.n(B),N=D.a.div(o||(o=Object(y.a)(["\n  //border-right: ridge grey 1px;\n  min-width: 60%;\n  min-height: 100%;\n  border-radius: 0px;\n"]))),P=(D.a.input(i||(i=Object(y.a)(["\n  min-height: 25px;\n  min-width: 250px;\n  display: block;\n  margin: auto;\n  margin-top: 15px;\n  border-radius: 50px;\n"]))),D.a.div(a||(a=Object(y.a)(["\n  margin-top: 20px;\n  padding:6px;\n  margin:10px;\n  \n"])))),z=(D.a.div(s||(s=Object(y.a)(["\n  background-color: black;\n  width: 100px;\n"]))),D.a.div(u||(u=Object(y.a)(["\n  width: wrap;\n  margin: 4px;\n  padding-left: 5px;\n  user-select: none;\n  &:hover{\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n    box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n    border-radius:10px;\n  } ;\n  &:active{\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.6);\n    box-shadow: inset 0 0 6px rgba(0,0,0,0.6);\n  }\n"])))),G=function(n){var e=n.users,t=n.onUserClick;return Object(I.jsxs)(N,{children:[Object(I.jsx)(R.a,{placeholder:"Search",style:{width:"80%",marginTop:"5px",marginLeft:"3px",minHeight:"20px",color:"white"}}),Object(I.jsxs)(P,{children:[Object(I.jsx)("b",{children:"Brukerne:"})," ",Object(I.jsx)("br",{}),e.map((function(n){return Object(I.jsx)(z,{onClick:function(){return t(n)},children:n.name},n.id)}))]})]})},H=t(163),K=D.a.div(l||(l=Object(y.a)(["\n  height: 100vh;\n  width: 100%;\n"]))),V=(D.a.div(d||(d=Object(y.a)(["\n  position: right;\n  width: 70%;\n  height: relative;\n  background-color: white;\n  margin: 3px;\n"]))),D.a.div(b||(b=Object(y.a)(["\n  position: left;\n  float:right;\n  width: 50%;\n  height: relative;\n  padding: 5px;\n  background-color: none;\n  margin: 3px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n"])))),q=D.a.div(h||(h=Object(y.a)(["\n  position: left;\n  float:left;\n  width: 50%;\n  height: relative;\n  padding: 5px;\n  background-color: blue;\n  margin: 3px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n"]))),F=D.a.div(j||(j=Object(y.a)([""]))),Q=(D.a.div(g||(g=Object(y.a)(["\n  font-size: small;\n"]))),D.a.div(x||(x=Object(y.a)(["\n  color: white;\n  width: 100%;\n  height: 40vh;\n  overflow: hidden;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    width: 20px;\n  }\n  ::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n  }\n"])))),W=D.a.div(p||(p=Object(y.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 80%;\n  padding: 3rem;\n"]))),X=D.a.h2(f||(f=Object(y.a)(["\n  text-align: left;\n  margin: 0px;\n  color: white;\n"])));function Y(n,e){return n.yours?(console.log("min melding"),Object(I.jsx)(V,{children:n.value},e)):Object(I.jsx)(q,{children:n.value},e)}var Z=function(n){var e=n.users,t=n.messages,r=n.text,c=n.onUserClick,o=n.handleChange,i=n.sendMessage;return Object(I.jsx)(K,{children:Object(I.jsxs)(H.a,{className:"h100",container:!0,children:[Object(I.jsx)(H.a,{item:!0,md:4,children:Object(I.jsx)(G,{users:e,onUserClick:function(n){return c(n)}})}),Object(I.jsx)(H.a,{item:!0,md:8,children:Object(I.jsxs)(W,{children:[Object(I.jsx)(X,{children:Object(I.jsx)("p",{children:"Skriv inn din melding"})}),Object(I.jsx)(Q,{children:t.map(Y)}),Object(I.jsxs)(F,{children:[Object(I.jsx)(R.a,{style:{width:"100%",marginBottom:24,background:"#fff"},label:"ENTER MESSAGE",variant:"outlined",value:r,onChange:o}),Object(I.jsx)(E.a,{style:{width:"100%"},variant:"contained",color:"secondary",onClick:i,children:"Send Message"})]})]})})]})})},$=t(166),_=function(){var n=Object(S.f)(),e=Object(m.useState)([]),t=Object(k.a)(e,2),r=t[0],c=t[1],o=Object(m.useContext)(en).authState,i=Object(m.useRef)(),a=Object(m.useRef)(),s=Object(m.useRef)(),u=Object(m.useRef)(),l=Object(m.useState)(""),d=Object(k.a)(l,2),b=d[0],h=d[1],j=Object(m.useState)([]),g=Object(k.a)(j,2),x=g[0],p=g[1];Object(m.useEffect)((function(){a.current=J()("/",{transports:["websocket","polling"]}),a.current.on("connect",(function(){a.current.emit("username",o.username)})),a.current.on("users",(function(n){c(n),console.log(n)})),a.current.on("connected",(function(n){console.log(n.name+" conneceted")})),a.current.on("disconnected",(function(n){console.log(n),c((function(e){return e.filter((function(e){return e.id!==n}))}))})),a.current.on("romInvitasjon",(function(e){!function(e,t){window.confirm("Vil du snakke med"+t)&&(u.current=t,n.push("/chat/".concat(e)),r=t,console.log("1: Starter samtale"),s.current=v(r),i.current=s.current.createDataChannel("sendChannel"),console.log("Jeg oppretter connection"),i.current.onopen=O,i.current.onmessage=w);var r}(e.romID,e.from)})),a.current.on("offer",C),a.current.on("answer",y),a.current.on("ice-candidate",R)}),[]);var f=function(e){if(e.id!==a.current.id){u.current=e.id,console.log("USER CLCKED",e);var t=function(){var e=Object($.a)();return n.push("/chat/".concat(e)),e}(),r={target:e.id,from:a.current.id,romID:t};a.current.emit("roomID",r)}else console.log("Du kan ikke snakke med deg selv")};function O(){console.log("onopen"),console.log(i.current)}function v(n){console.log("2: Lager peer med id "+n);var e=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"}]});return e.onicecandidate=D,e.onnegotiationneeded=function(){return function(n){s.current.createOffer().then((function(n){return s.current.setLocalDescription(n)})).then((function(){var e={target:n,caller:a.current.id,sdp:s.current.localDescription};a.current.emit("offer",e)})).catch((function(n){return console.log(n)}))}(n)},console.log(e),e}function w(n){p((function(e){return[].concat(Object(M.a)(e),[{yours:!1,value:n.data}])}))}function C(n){console.log("6: offer"),s.current=v(),s.current.ondatachannel=function(n){console.log("plis"),i.current=n.channel,i.current.onopen=O,i.current.onmessage=w};var e=new RTCSessionDescription(n.sdp);s.current.setRemoteDescription(e).then((function(){})).then((function(){return s.current.createAnswer()})).then((function(n){return s.current.setLocalDescription(n)})).then((function(){var e={target:n.caller,caller:a.current.id,sdp:s.current.localDescription};a.current.emit("answer",e)}))}function y(n){var e=new RTCSessionDescription(n.sdp);s.current.setRemoteDescription(e).catch((function(n){return console.log(n)})),console.log("Skal v\xe6re koblet sammen")}function D(n){if(n.candidate){console.log("4 er kandidat");var e={target:u.current,candidate:n.candidate};console.log(e.target),a.current.emit("ice-candidate",e)}}function R(n){var e=new RTCIceCandidate(n);console.log("5 : "+e),s.current.addIceCandidate(e).catch((function(n){return console.log(n)}))}return Object(I.jsx)(Z,{users:r,messages:x,text:b,onUserClick:function(n){return f(n)},handleChange:function(n){return function(n){h(n.target.value)}(n)},sendMessage:function(){b.length&&(i.current.send(b),p((function(n){return[].concat(Object(M.a)(n),[{yours:!0,value:b}])})),h(""))}})},nn=Object(I.jsxs)(S.c,{children:[Object(I.jsx)(S.a,{exact:!0,path:"/",component:U}),Object(I.jsx)(S.a,{exact:!0,path:"/chat",component:_}),Object(I.jsx)(S.a,{exact:!0,path:"/chat/:roomID",component:_})]}),en=Object(m.createContext)({authState:null,setAuthState:function(){}});var tn=function(){var n=Object(m.useState)({username:null}),e=Object(k.a)(n,2),t=e[0],r=e[1];return Object(I.jsx)(C.a,{children:Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(en.Provider,{value:{authState:t,setAuthState:r},children:nn})})})};w.a.render(Object(I.jsx)(O.a.StrictMode,{children:Object(I.jsx)(tn,{})}),document.getElementById("root"))},95:function(n,e,t){},96:function(n,e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.71532141.chunk.js.map